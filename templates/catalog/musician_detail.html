{% extends "base.html" %}

{% block content %}

  <h1>{{ musician.full_name }}</h1>

  <h3>Instruments: {{ musician.instrument_list|join:", " }}</h3>

  <br>

  <h3>Member of:</h3>
  <ul>
    {% for band in musician.bands.all %}
      <li><a href="{{ band.get_absolute_url }}">{{ band.name }}</a></li>
    {% endfor %}
  </ul>

  {% if musician.performance_set.first.songs.all %}
    <h3>Songs</h3>
    <table class="table">
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Band</th>
        <th>Album</th>
        <th>Role</th>
      </tr>
    {% for performance in musician.performance_set.all %}
      {% for song in performance.songs.all %}
        <tr>
          <td>{{ song.id }}</td>
          <td><a href="{{ song.get_absolute_url }}">{{ song.name }}</a></td>
          <td><a href="{{ song.albums.first.band.get_absolute_url }}">{{ song.albums.first.band.name }}</a></td>
          <td>{{ song.album_list|join:", " }}</td>
          <td>{{ performance.instruments.all|join:", " }}</td>
        </tr>
      {% endfor %}
    {% endfor %}
    </table>
  {% else %}
    <p>There are no songs by this musician yet.</p>
  {% endif %}
{% endblock %}
